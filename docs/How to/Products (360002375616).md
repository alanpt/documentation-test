# Products

See <https://github.com/waysact/waysact/wiki/Products>

# Products

Products is a feature that gives the ability to select one or several
Gifts when capturing a pledge. It replaces and combines the usage of
Amount component and Gifts component. Similar to Gifts the Products
chosen by the donor will be displayed at the top of the signature screen
(unless Campaign Checklists are present - if Campaign Checklists are
present they will take precedence and appear on the signature page).

Products cannot be used in conjunction with Amount / Monthly Amount /
Gifts / Regular Giving components, they are mutually exclusive. Products
replaces these components in a single component.

First things first, to have products in the form you have to create them
for the campaign. Currently you can create products for a campaign as
Super Admin, from the Campaigns page. Beside the Campaign name you will
see a link for \'Products\' alongside the Amount Presets, Email
Templates etc.

NOTE - you must be in the account that owns the campaign you are setting
up the Products for. Only the campaigns contained in the current account
will be displayed as options when setting up the Products.

Products are available in the component resources and you can edit the
names of the filters:

PRODUCTS_SCOPE_ALL (default text is All) PRODUCTS_SCOPE_REGULAR_GIVING
(default text is Regular Giving) PRODUCTS_SCOPE_ONE_OFF (default text is
One-Off)

You can hide the \"All\" tab and the \"One-off\" tabs with CSS :

.product-container-header span:nth-child(3) { display:none;}
.product-container-header span:nth-child(1) { display:none;}

## Attributes

## ![Screen_Shot_2020-12-22_at_5.41.23_pm.png](https://support.waysact.com/hc/article_attachments/360005814956/Screen_Shot_2020-12-22_at_5.41.23_pm.png)

A product has:

    Name
    Order
    Frequency
    Options
    Conditions
    Active 

![Screen_Shot_2020-12-22_at_5.42.11_pm.png](https://support.waysact.com/hc/article_attachments/360005701835/Screen_Shot_2020-12-22_at_5.42.11_pm.png)

###  

### Name:

Will be used to identify the product and will the option to select in
the Products dropdown in the form. ie: Child Sponsorship, Child Rescue,
Water, Education, etc.

###  

### Order:

The position of this product in the dropdown.

###  

### Frequency:

any allowed payment frequency: monthly, annual, donation(one-off), etc.

 

### Options:

a comma separated list of the preset amount options to select for this
product. You can also add the option other to allow the donor to enter
an amount. ie: 10, 20, 30, 100, 100, other.

If you would like a quantity drop list (similar to the old Gifts
component) you can achieve this (on one off Products only) by adding
only one amount in the Options and selecting the One off donation
frequency. If you do this, on the fundraiser front end it will appear as
a drop list and the quantity you select will be multipled by the gift
amount. As with the original Gifts component, because of the way this
functions it is best to add the unit value of the Gift in the title so
it is clearer for the donor i.e. `School Pencils ($5)`.

###  

### Conditions:

a comma separated list of key:value entries. Currently supported
conditions are:

-   `allow_cents:true`, `allow_cents:false`. By default we don\'t allow
    cents, so you only need to use allow_cents:true if you want to allow
    it.
-   `min:10`, will require a min value of 10, usually used to restrict
    the amounts when the other option is selected.
-   `requires_child_id:true` will search the form for the presence of a
    sponsored child id, if none is found it will invalidate this
    product. A sponsored child id can be provided with any of the
    following components: Child Sponsorship, Child Profile Number or
    Child Selection.
-   `show_with` will show the product based on the response to another
    question on the form e.g. `show_with_firstname_eq:Paul`,
    `show_with_interested_in_eq:donation|donation with petition`
-   `hide_with` will hide the product based on the response to another
    question on the form e.g. `hide_with_firstname_eq:Lisa`,
    `hide_with_interested_in_eq:donation|petition|donation with petition`

###  

### Active:

you can disable a product without deleting it, by setting the active
field to false.

##  

## Advanced Conditions:

1.  There is a special usage where you can change the minimum value
    allowed for a product if another product is already selected. For
    example, lets say you have Product A and Product B. The minimum for
    product A is 50, but if you also select product B, the minimum for
    product A is 30. This is how you set this up:

Set the minimum on product A: Conditions for product A: min:50,
min_with_product_b:30

Now tag the Product B: Conditions for product B: tag:product_b

Is important that the sufix of min_with_sufix matches the tag
tag:suffix.

There is a World Vision Australia Products campaign under the ANOTHER
account.

2.  The default filter is \'ALL\' which will display all regular giving
    and one off donation products. You can change the default filter
    displayed via a locale:

valid options are: default_scope:\'regular-giving\' : ie only regular
giving products are displayed and the fundraiser can select ALL to
display all or One-off to display the one-off products
default_scope:\'one-off\' : ie only one off products are displayed and
the fundraiser can select ALL to display all or Regular Giving to
display the Regular Giving products default_scope:\'all\' : all products
are displayed.

If no constraint, scope will default to ALL.

##  

## Validations:

-   You can select several products
-   You cannot select the same product twice, an error will be shown,
    invalidating component.
-   You cannot select products with different recurring frequencies
    (although one off donation/gifts can be taken out with other
    frequencies). Error will be shown, invalidating component. This
    means you cannot have a monthly product selected along with an
    annual product.

Value on Pledge:

Selected products will be stored in pledge.products you can have access
to them in schema sources through Javascript.

The amount and transaction_type of the pledge will be filled based on
the selected products.

If a recurring product is selected it will be used to fill the
transaction_type value of the pledge, it will override one-off products.

The amount of the pledge will have the total of the products selected.
For example, if following products were selected:

    $10, monthly
    $20, monthly
    $10, one-off
    $10, one-off

pledge.amount = \$50 pledge.transaction_type = \'monthly\'

If only one-off products were selected, transaction_type will be
\'donation\' (one-off). Recurring frequencies override one-off if
present. Pledge Signature:

Values on signature will be grouped by frequency, for the example above
it will look like:

\$30 per month \$20 one-off donation

Note - you can update the currency displayed on the form by using the
locale to the products component to update the currency i.e.
`currency:'€'`

The products will soon be displayed in the edit pledge screen however
they won\'t be available for the Admin or Fundraiser Dashboards.

##  

## CSS customisation

To Style the product type header options (for example \'all\', \'regular
giving\', \'one off\', etc)

-   Here is the default CSS for this:

span.product-container-scope { border-radius: 4px; font-size: small;
font-variant: all-small-caps; margin: 5px; padding: 0px 5px 3px 5px; }

-   You can add anything you like to this, for example

span.product-container-scope { color: red; background-color:#009876;
font-size:large; }

-   The selected product type needs slightly more specific styling:

here\'s the default:

span.product-container-scope.selected { background: #ccc; font-weight:
bold; }

 

You can change that to:

span.product-container-scope.selected { background: #whatever;
font-weight: bold; color: #whatever; font-size: large; (or small,
medium, large, x-large, xx-large or 0.5em, 1em, 2em etc) }

-   In the drop down itself, there are default coloured markers which
    describe the product frequency and product price. It would be
    preferable not to tinker with these but if you have to

The default css for the frequency is:

span.product-option-frequency { background: #bbd86b; border-radius: 4px;
color: green; font-size: small; font-variant: all-small-caps; margin:
2px 2px 2px 0px; padding: 0px 2px 2px 2px; }

So you can change that to:

span.product-option-frequency { background: #whatever; - use an online
css color picker color: green; font-size: small; (or small, medium,
large, x-large, xx-large or 0.5em, 1em, 2em etc) }

the default for the price is:

span.product-option-price { background: #d9f3f7; border-radius: 4px;
color: #00acca; font-size: small; font-variant: all-small-caps; margin:
2px; padding: 0px 2px 2px 2px; }

you can change that to

span.product-option-price { background: #whatever; - use an online css
color picker color: #whatever; - use an online css color picker
font-size: small; - you can change this }

This will change the color of the product price for all product prices.
At the moment it\'s not exactly easy to change the prices to have
individual colors. It can be done if you ever really need to using \'nth
child\' css.

-   To change just one of the filters you can use

.product-container-header span:nth-child(3) { background: orange;
color:white; }

For example
`.product-container-header span:nth-child(3) {font-weight: bold; color: #FF6600}`
will change \'One off donations\' to be the colour #FF6600

-   To hide the + button to add more products and the Total
    calculations:

#div_for_products .add-product-button, #div_for_products .product-total
{\
display: none;\
}

## Schemas

The brain bank in ANOTHER account has some JS related to the products
feature
